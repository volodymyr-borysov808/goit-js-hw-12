{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const loader = document.querySelector('.loader');\n\nexport const createGalleryListTemplate = odjImgInfo => {\n  const {\n    webformatURL: smallImg,\n    largeImageURL: bigImg,\n    tags: altImg,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = odjImgInfo;\n\n  return `  \n  <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${bigImg}\">\n      <img class=\"gallery-img\" src=\"${smallImg}\" alt=\"${altImg}\"  />\n    </a>\n      <div class=\"container\">\n        <div class=\"deck-img\">\n        likes\n          <h2 class=\"value-deck-img\">${likes}</h2>\n        </div>\n        <div class=\"deck-img\">\n        views\n          <h2 class=\"value-deck-img\">${views}</h2>\n        </div>\n        <div class=\"deck-img\">\n        comments\n          <h2 class=\"value-deck-img\">${comments}</h2>\n        </div>\n        <div class=\"deck-img\">\n        downloads\n          <h2 class=\"value-deck-img\">${downloads}</h2>\n        </div>\n      </div>\n  </li>`;\n};\n\nexport const showLoader = () => {\n  return (loader.style.display = 'block');\n};\nexport const hideLoader = () => {\n  return (loader.style.display = 'none');\n};\n","import axios from 'axios';\n\nexport const searchPhotoApi = (userSearchQuery, pageNumb) => {\n  const urlSearchParams = {\n    params: {\n      page: pageNumb,\n      q: userSearchQuery,\n      per_page: 15,\n      key: '48317789-78974bc54d3835e3e1fe36f62',\n      safesearch: true,\n      orientation: 'horizontal',\n      image_type: 'photo',\n    },\n  };\n\n  return axios(`https://pixabay.com/api/`, urlSearchParams);\n};\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport {\n  createGalleryListTemplate,\n  showLoader,\n  hideLoader,\n} from './js/render-functions';\nimport { searchPhotoApi } from './js/pixabay-api';\n\nconst form = document.querySelector('.main-form');\nconst list = document.querySelector('.list-gallery');\nconst btnLoadMore = document.querySelector('.js-load-more');\nconst allert = iziToast;\nconst allertOptions = {\n  title: '❌ Sorry',\n  color: 'red',\n  position: 'topRight',\n};\nconst simplelightbox = new SimpleLightbox('.list-gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet userSearchQuery = '';\nlet totalPages = '';\n\nconst searchUserPhotoApi = async e => {\n  try {\n    e.preventDefault();\n    showLoader();\n\n    userSearchQuery = e.currentTarget.elements.user_search_query.value.trim();\n    list.innerHTML = '';\n    page = 1;\n    btnLoadMore.classList.add('is-hidden');\n\n    if (userSearchQuery === '') {\n      allert.show({\n        ...allertOptions,\n        color: 'orange',\n        message: 'Please enter a keyword',\n      });\n\n      hideLoader();\n      form.reset();\n      list.innerHTML = '';\n      return;\n    }\n\n    const { data } = await searchPhotoApi(userSearchQuery, page);\n\n    if (data.total === 0) {\n      allert.show({\n        ...allertOptions,\n        message:\n          'There are no images matching your search query. Please try again!',\n      });\n\n      hideLoader();\n      form.reset();\n      list.innerHTML = '';\n      return;\n    }\n\n    totalPages = Math.ceil(data.totalHits / 15);\n    const galleryTemplate = data.hits\n      .map(el => createGalleryListTemplate(el))\n      .join('');\n\n    list.innerHTML = galleryTemplate;\n    simplelightbox.refresh();\n    form.reset();\n\n    if (page < totalPages) {\n      btnLoadMore.classList.remove('is-hidden');\n    }\n    btnLoadMore.addEventListener('click', getLoadMoreBtn);\n  } catch (error) {\n    allert.show({ ...allertOptions, message: error.message });\n  } finally {\n    hideLoader();\n  }\n};\n\nform.addEventListener('submit', searchUserPhotoApi);\n\nconst getLoadMoreBtn = async e => {\n  try {\n    page++;\n    showLoader();\n\n    const { data } = await searchPhotoApi(userSearchQuery, page);\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryListTemplate(el))\n      .join('');\n\n    list.insertAdjacentHTML('beforeend', galleryTemplate);\n    hideLoader();\n    simplelightbox.refresh();\n    const elLi = document.querySelector('.gallery-item');\n    const rect = elLi.getBoundingClientRect();\n    const heightEl = rect.height * 2;\n\n    window.scrollBy({\n      top: heightEl,\n      behavior: 'smooth',\n    });\n\n    if (page >= totalPages) {\n      btnLoadMore.classList.add('is-hidden');\n      btnLoadMore.removeEventListener('click', getLoadMoreBtn);\n      allert.show({\n        ...allertOptions,\n        color: 'orange',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    allert.show({ ...allertOptions, message: error.message });\n  } finally {\n    hideLoader();\n  }\n};\n"],"names":["loader","createGalleryListTemplate","odjImgInfo","smallImg","bigImg","altImg","likes","views","comments","downloads","showLoader","hideLoader","searchPhotoApi","userSearchQuery","pageNumb","axios","form","list","btnLoadMore","allert","iziToast","allertOptions","simplelightbox","SimpleLightbox","page","totalPages","searchUserPhotoApi","e","data","galleryTemplate","el","getLoadMoreBtn","error","heightEl"],"mappings":"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"}